<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
   "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="teamProject.food114.mapper.MenuMapper">
	<!-- 카테고리 전체 검색 -->
	<select id="selectCategory" parameterType="hashmap"
		resultType="teamProject.food114.model.Category">
		SELECT * FROM FOOD114_CATEGORY
	</select>
	<!-- 메뉴 정보 검색  -->
	<select id="selectMenuList" parameterType="hashmap" resultType="teamProject.food114.model.Menu">
		SELECT *, 
			CASE WHEN STATUS = '1' THEN '판매종료'
			WHEN STATUS = '0' THEN '판매중'
			WHEN STATUS = '3' THEN '품절'
			END AS STA
		FROM FOOD114_MENU 
		WHERE BIZID = #{bizId}
	</select>
	<select id="selectMenuCount" parameterType="hashmap"
		resultType="teamProject.food114.model.Menu">
		SELECT
			COUNT(*) AS CNT,
			SUM(CASE WHEN STATUS = '1' THEN 1 ELSE 0 END) AS "END",
   			SUM(CASE WHEN STATUS = '0' THEN 1 ELSE 0 END) AS "ING",
   			SUM(CASE WHEN STATUS = '3' THEN 1 ELSE 0 END) AS "SOLDOUT"
		FROM FOOD114_MENU
		WHERE BIZID = #{bizId}
		GROUP BY BIZID;
	</select>
</mapper>